<!DOCTYPE html>
<html lang="en">

<!--<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">-->

<!--声明 Thymeleaf 的命名空间-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>


   <!-- <script type="text/javascript" th:src="@{/js/jquery-2.1.4.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/bootstrap-3.3.7-dist/js/bootstrap.min.js}"></script>
    <link type="text/css"  rel="stylesheet" th:href="@{/js/bootstrap-3.3.7-dist/css/bootstrap.min.css}">
    &lt;!&ndash; rel=stylesheet：1. 定义文档与外部资源的关系；2. 是链接样式表。 &ndash;&gt;
    &lt;!&ndash; 所以说，我们用这样的方式，引入外部的css文件时，一定不能忘记rel属性的配置。 &ndash;&gt;

    <script type="text/javascript" th:src="@{/js/bootstrap-treeview/bootstrap-treeview.min.js}"></script>
    <link type="text/css"  rel="stylesheet" th:href="@{/js/bootstrap-treeview/bootstrap-treeview.min.css}">
    <script type="text/javascript" th:src="@{/js/bootStrap-addTabs/bootstrap.addtabs.min.js}"></script>
    <link type="text/css"  rel="stylesheet" th:href="@{/js/bootStrap-addTabs/bootstrap.addtabs.css}">


    <script type="text/javascript" th:src="@{/js/bootstrap-table/bootstrap-table.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/bootstrap-table/locale/bootstrap-table-zh-CN.min.js}"></script>
    <link type="text/css"  rel="stylesheet" th:href="@{/js/bootstrap-table/bootstrap-table.min.css}">


    <script type="text/javascript" th:src="@{/js/bootstrap-fileinput/js/fileinput.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/bootstrap-fileinput/js/locales/zh.js}"></script>
    <link type="text/css"  rel="stylesheet" th:href="@{/js/bootstrap-fileinput/css/fileinput.min.css}">

    <script type="text/javascript" th:src="@{/js/bootstrap-bootbox/bootbox.js}"></script>
    <script type="text/javascript" th:src="@{/js/echarts.min.js}"></script>-->


    <script type="text/javascript" src="../jss/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="../jss/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <link type="text/css"  rel="stylesheet" href="../jss/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <!-- rel=stylesheet：1. 定义文档与外部资源的关系；2. 是链接样式表。 -->
    <!-- 所以说，我们用这样的方式，引入外部的css文件时，一定不能忘记rel属性的配置。 -->

    <script type="text/javascript" src="../jss/bootstrap-treeview/bootstrap-treeview.min.js"></script>
    <link type="text/css"  rel="stylesheet" href="../jss/bootstrap-treeview/bootstrap-treeview.min.css">
    <script type="text/javascript" src="../jss/bootStrap-addTabs/bootstrap.addtabs.min.js"></script>
    <link type="text/css"  rel="stylesheet" href="../jss/bootStrap-addTabs/bootstrap.addtabs.css">


    <script type="text/javascript" src="../jss/bootstrap-table/bootstrap-table.min.js"></script>
    <script type="text/javascript" src="../jss/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
    <link type="text/css"  rel="stylesheet" href="../jss/bootstrap-table/bootstrap-table.min.css">

    <!-- tp映入 -->
    <script type="text/javascript" src="../jss/bootstrap-fileinput/js/fileinput.min.js"></script>
    <script type="text/javascript" src="../jss/bootstrap-fileinput/js/locales/zh.js"></script>
    <link type="text/css"  rel="stylesheet" href="../jss/bootstrap-fileinput/css/fileinput.min.css">

    <script type="text/javascript" src="../jss/bootstrap-bootbox/bootbox.js"></script>

    <script type="text/javascript" src="../jss/echarts.min.js"></script>

    <!-- 引入bootstrap的日期的css、js -->
    <link rel="stylesheet" href="../jss/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css">
    <script type="text/javascript" src="../jss/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
    <script type="text/javascript" src="../jss/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>

</head>
<body>
<!-- 	导航栏 -->
<nav class="navbar navbar-inverse">
</nav>
<!--<div class="container-fluid">
    <div class="row">
        <div class="col-md-2">
            <div id="myTree"></div>
        </div>
        <div class="col-md-10">
            <div id="myTabs" >
                &lt;!&ndash; 新选项卡 &ndash;&gt;
                <ul class="nav nav-tabs" id="tablist" >
                    <li role="presentation" class="active"></li>
                </ul>
                &lt;!&ndash; 选项卡下内容 &ndash;&gt;
                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="home"></div>
                </div>
            </div>
        </div>
    </div>
</div>-->

<button class="btn btn-success" onclick="openCombo()">新增</button>
<table class="table" id="myTable"></table>



<form action="#" id="formid" onsubmit="return false" enctype="multipart/form-data">
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"aria-hidden="true">&times;</button>
                    <h4 class="modal-title" id="myModalLabel">新增</h4>
                </div>
                <div class="modal-body">

                    <input  name="id" class="form-control" id="id" type="hidden" /><br>
                    id<input type="text" name="text" class="form-control" id="text"><br>
                    id<input type="text" name="pid" class="form-control" id="pid"><br>
                    id<input type="text" name="url" class="form-control" id="url"><br>
                </div>
                <div class="modal-footer">
                    <button type="button" onclick="addMovie()" class="btn btn-primary" data-dismiss="modal">提交更改</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
</form>


</body>
<script>


    //打开新增弹框
    openCombo = function(){
        $('#myModal').modal('show');
        //清空bootstarp模态框二次打开残留数据
        $('body').on('hidden.bs.modal', '.modal', function () {
            $('input').val('')
        });
    }
    //新增
    addMovie = function(){
        $.ajax({
            url:"tree/add",
            data:$("#formid").serialize(),
            async:false,
            success:function(){
                $("#myModal").modal("hide");
                $("#myTable").bootstrapTable("refresh");

            }
        })
    }


    $(function(){
        able();




    })


    function able(){
        $('#myTable').bootstrapTable({
            toolbar:'#toolbar',
            url:'tree/cha',


            striped:true,
            queryParams:function(){


                return {



                };
            },
            columns:[
                {field:"checkbox",checkbox:true},
                {field:"id",title:"id"},
                {field:"text",title:"id"},
                {field:"pid",title:"id"},
                {field:"url",title:"id"},

                {field:"tool",title:"操作",formatter:function(value,row,index){
                        var str = "";
                        str += '<button type="button" onclick="sc('+row.id+')" class="btn">删除</button>';
                        str += '<button type="button" onclick="on_upd('+row.id+')" class="btn">修改</button>';
                        return str;
                    }}
            ]
        });
    }


    on_upd = function(id){
        alert(id)
        $.ajax({
            url:"tree/hui",
            data:{id:id},
            type:"get",
            dataType:"json",
            success:function(data){
                $("#id").val(data.id);
                $("#text").val(data.text);
                $("#pid").val(data.pid);
                $("#url").val(data.url);
            }
        })
        $('#myModal').modal('show');
    }

    function sc(id){
        $.ajax({
            url:"tree/del",
            data:{id:id},
            type:"get",
            success:function(){
               $("#myTable").bootstrapTable("refresh");
            }
        })
    }

    /*
    $.ajax({
        url:"tree/dTree",
        data:{pid:0},
        dataType:"json",
        success:function(data){
            $("#myTree").treeview({
                data:data,
                onNodeSelected:function(eval,node){
                    $.addtabs({iframeHeight:550});
                    $.addtabs.add({
                        id:node.id,
                        title:node.text,
                        url:node.url
                    })
                }
            })
        }
    })*/

</script>
</html>